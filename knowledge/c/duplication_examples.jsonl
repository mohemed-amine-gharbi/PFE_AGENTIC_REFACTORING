{"id":"c_dup_001","language":"c","agent":"DuplicationAgent","before":"int create(Product *p){ if(p==NULL) return ERR_NULL; if(p->name==NULL) return ERR_NAME; return repo_save(p);} int update(Product *p){ if(p==NULL) return ERR_NULL; if(p->name==NULL) return ERR_NAME; return repo_update(p);}","after":"static int validate_product(Product *p){ if (p == NULL) return ERR_NULL; if (p->name == NULL) return ERR_NAME; return OK; } int create(Product *p){ int status = validate_product(p); if (status != OK) return status; return repo_save(p); } int update(Product *p){ int status = validate_product(p); if (status != OK) return status; return repo_update(p); }","why_safe":"Validation logic extracted into shared helper; repository calls unchanged."}
{"id":"c_dup_002","language":"c","agent":"DuplicationAgent","before":"void init_a(Item *it){ it->id=0; it->count=0; it->flag=0; } void init_b(Item *it){ it->id=0; it->count=0; it->flag=0; }","after":"static void reset_item(Item *it){ it->id = 0; it->count = 0; it->flag = 0; } void init_a(Item *it){ reset_item(it); } void init_b(Item *it){ reset_item(it); }","why_safe":"Repeated struct initialization extracted into one static helper with identical assignments."}