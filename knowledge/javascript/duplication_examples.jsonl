{"id":"js_dup_001","language":"javascript","agent":"DuplicationAgent","before":"function create(user){ if(!user) throw new Error('missing'); if(!user.name) throw new Error('name'); return repo.create(user);} function update(user){ if(!user) throw new Error('missing'); if(!user.name) throw new Error('name'); return repo.update(user);}","after":"function validateUser(user){ if(!user) throw new Error('missing'); if(!user.name) throw new Error('name'); } function create(user){ validateUser(user); return repo.create(user);} function update(user){ validateUser(user); return repo.update(user);}","why_safe":"Validation duplicated logic extracted; repository calls unchanged."}
{"id":"js_dup_002","language":"javascript","agent":"DuplicationAgent","before":"const a = items.map(x => ({ id:x.id, name:x.name })); const b = users.map(x => ({ id:x.id, name:x.name }));","after":"function pickIdName(x){ return { id: x.id, name: x.name }; } const a = items.map(pickIdName); const b = users.map(pickIdName);","why_safe":"Repeated mapping logic extracted into helper; output shape unchanged."}