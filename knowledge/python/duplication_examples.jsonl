{"type":"duplication_example","language":"python","title":"extract_response_formatter","smell":"duplicate_dict_formatting","before":"def user_to_dict(user):\n    return {'id': user.id, 'email': user.email, 'active': user.active}\n\n\ndef admin_to_dict(admin):\n    return {'id': admin.id, 'email': admin.email, 'active': admin.active}","after":"def _account_to_dict(account):\n    return {'id': account.id, 'email': account.email, 'active': account.active}\n\n\ndef user_to_dict(user):\n    return _account_to_dict(user)\n\n\ndef admin_to_dict(admin):\n    return _account_to_dict(admin)","notes":"Extract exact duplicate formatting logic into helper."}
{"type":"duplication_example","language":"python","title":"parameterize_required_field_check","smell":"duplicate_validation_blocks","before":"def validate_user_payload(data):\n    if 'email' not in data:\n        raise ValueError('email required')\n    if 'name' not in data:\n        raise ValueError('name required')\n\n\ndef validate_product_payload(data):\n    if 'sku' not in data:\n        raise ValueError('sku required')\n    if 'name' not in data:\n        raise ValueError('name required')","after":"def _require_fields(data, fields):\n    for field in fields:\n        if field not in data:\n            raise ValueError(f'{field} required')\n\n\ndef validate_user_payload(data):\n    _require_fields(data, ['email', 'name'])\n\n\ndef validate_product_payload(data):\n    _require_fields(data, ['sku', 'name'])","notes":"Near-duplicate validation extracted into parameterized helper."}
{"type":"duplication_example","language":"python","title":"extract_parse_int_with_default","smell":"duplicate_try_except_conversion","before":"def parse_limit(value):\n    try:\n        return int(value)\n    except (TypeError, ValueError):\n        return 10\n\n\ndef parse_offset(value):\n    try:\n        return int(value)\n    except (TypeError, ValueError):\n        return 0","after":"def _parse_int_or_default(value, default):\n    try:\n        return int(value)\n    except (TypeError, ValueError):\n        return default\n\n\ndef parse_limit(value):\n    return _parse_int_or_default(value, 10)\n\n\ndef parse_offset(value):\n    return _parse_int_or_default(value, 0)","notes":"Repeated conversion logic unified safely with explicit default parameter."}
{"type":"duplication_example","language":"python","title":"extract_status_logging","smell":"duplicate_logging_messages","before":"def mark_started(job, logger):\n    job.status = 'started'\n    logger.info(f'job {job.id} started')\n\n\ndef mark_finished(job, logger):\n    job.status = 'finished'\n    logger.info(f'job {job.id} finished')","after":"def _set_status(job, status, logger):\n    job.status = status\n    logger.info(f'job {job.id} {status}')\n\n\ndef mark_started(job, logger):\n    _set_status(job, 'started', logger)\n\n\ndef mark_finished(job, logger):\n    _set_status(job, 'finished', logger)","notes":"Duplicate mutation+logging pattern extracted into helper while preserving log format."}