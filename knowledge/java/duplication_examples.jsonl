{"id":"java_dup_001","language":"java","agent":"DuplicationAgent","before":"public void create(Product p){ if(p==null) throw new IllegalArgumentException(\"p\"); if(p.getName()==null || p.getName().isBlank()) throw new IllegalArgumentException(\"name\"); repo.save(p);} public void update(Product p){ if(p==null) throw new IllegalArgumentException(\"p\"); if(p.getName()==null || p.getName().isBlank()) throw new IllegalArgumentException(\"name\"); repo.update(p);}","after":"public void create(Product p){ validateProduct(p); repo.save(p);} public void update(Product p){ validateProduct(p); repo.update(p);} private void validateProduct(Product p){ if (p == null) throw new IllegalArgumentException(\"p\"); if (p.getName() == null || p.getName().isBlank()) throw new IllegalArgumentException(\"name\"); }","why_safe":"Validation logic is identical and reused; repository calls unchanged."}
{"id":"java_dup_002","language":"java","agent":"DuplicationAgent","before":"ProductDto a(Product p){ ProductDto d=new ProductDto(); d.setId(p.getId()); d.setName(p.getName()); return d;} ProductDto b(Product p){ ProductDto d=new ProductDto(); d.setId(p.getId()); d.setName(p.getName()); return d;}","after":"ProductDto a(Product p){ return toDto(p);} ProductDto b(Product p){ return toDto(p);} private ProductDto toDto(Product p){ ProductDto d = new ProductDto(); d.setId(p.getId()); d.setName(p.getName()); return d; }","why_safe":"Repeated DTO mapping extracted into one helper, same field assignments preserved."}
